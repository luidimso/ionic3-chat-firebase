{"version":3,"sources":["../../src/pages/user-profile/user-profile.module.ts","../../src/pages/user-profile/user-profile.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACC;AACqB;AAWtE;IAAA;IAAoC,CAAC;IAAxB,qBAAqB;QATjC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,sEAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;gBACzC,uFAAgB;aACjB;SACF,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACdQ;AACe;AACD;AAEA;AAOxD;IAME,yBAAmB,OAAsB,EAAS,SAAoB,EAAS,WAAwB,EAAS,WAAwB;QAArH,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAS,gBAAW,GAAX,WAAW,CAAa;QAJxI,YAAO,GAAW,KAAK,CAAC;IAKxB,CAAC;IAED,yCAAe,GAAf;QACE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;IACxC,CAAC;IAED,wCAAc,GAAd;QAAA,iBAIC;QAHC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,CAAC,UAAC,IAAS;YAC/C,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,kCAAQ,GAAR,UAAS,KAAW;QAApB,iBAeC;QAdC,KAAK,CAAC,cAAc,EAAE,CAAC;QAEvB,EAAE,EAAC,IAAI,CAAC,KAAK,CAAC,EAAC;YACb,IAAI,YAAU,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1E,YAAU,CAAC,EAAE,CAAC,eAAe,EAAE,UAAC,QAAQ;gBACtC,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,gBAAgB,GAAG,QAAQ,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;YAC5F,CAAC,EAAE,UAAC,KAAW;YAEf,CAAC,EAAE;gBACD,KAAI,CAAC,QAAQ,CAAC,YAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACjD,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;IACH,CAAC;IAED,iCAAO,GAAP,UAAQ,KAAK;QACX,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC;IAEO,kCAAQ,GAAhB,UAAiB,QAAgB;QAAjC,iBAMC;QALC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC;YACzH,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,KAAK,GAAG,SAAS,CAAC;YACvB,KAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;IACL,CAAC;IA9CU,eAAe;QAJ3B,wEAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;WACG;SACjC,CAAC;wBAOwI;OAN7H,eAAe,CA+C3B;IAAD,CAAC;AAAA;SA/CY,eAAe,gB","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UserProfilePage } from './user-profile';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    UserProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(UserProfilePage),\n    ComponentsModule\n  ],\n})\nexport class UserProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-profile/user-profile.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AuthService } from '../../providers/auth/auth';\nimport { User } from '../../models/user.model';\nimport { UserService } from '../../providers/user/user';\n\n@IonicPage()\n@Component({\n  selector: 'page-user-profile',\n  templateUrl: 'user-profile.html',\n})\nexport class UserProfilePage {\n  user:User;\n  canEdit:boolean = false;\n  uploadProgress:number;\n  private photo:File;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public authService: AuthService, public userService: UserService) {\n  }\n\n  ionViewCanEnter():Promise<boolean>{\n    return this.authService.authenticated;\n  }\n\n  ionViewDidLoad(){\n    this.userService.currentUser.subscribe((user:User) => {\n      this.user = user;\n    });\n  }\n\n  onSubmit(event:Event){\n    event.preventDefault();\n\n    if(this.photo){\n      let uploadTesk = this.userService.uploadPhoto(this.photo, this.user.$key);\n      uploadTesk.on('state_changed', (snapshot) => {\n        this.uploadProgress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n      }, (error:Error) => {\n\n      }, () => {\n        this.editUser(uploadTesk.snapshot.downloadURL);\n      });\n    } else {\n      this.editUser();\n    }\n  }\n\n  onPhoto(event):void{\n    this.photo = event.target.files[0];\n  }\n\n  private editUser(photoUrl?:string){\n    this.userService.edit({name: this.user.name, username: this.user.username, photo: photoUrl || this.user.photo || ''}).then(() => {\n      this.canEdit = false;\n      this.photo = undefined;\n      this.uploadProgress = 0;\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-profile/user-profile.ts"],"sourceRoot":""}