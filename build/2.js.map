{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n  ],\n})\nexport class SignupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, Loading, LoadingController } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { UserService } from '../../providers/user/user';\nimport { AuthService } from '../../providers/auth/auth';\nimport { FirebaseAuthState } from 'angularfire2';\nimport \"rxjs/add/operator/first\"\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class SignupPage {\n\n  signupForm:FormGroup;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public formBuilder: FormBuilder, public userService: UserService, public alertCtrl: AlertController, public authService: AuthService, public loadingCtrl:LoadingController) {\n    let emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    this.signupForm = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.minLength(3)]],\n      username: ['', [Validators.required, Validators.minLength(3)]],\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      email: ['', Validators.compose([Validators.required, Validators.pattern(emailRegex)])]\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SignupPage');\n  }\n\n  onSubmit():void {\n    let loading:Loading = this.showLoading();\n    let formUser = this.signupForm.value;\n    let username:string = formUser.username;\n\n    this.userService.userExists(username).first().subscribe((userExists:boolean) => {\n      if(!userExists){\n        this.authService.createAuthUser({ // to do authentication on Firebase Auth\n          email: formUser.email,\n          password: formUser.password\n        }).then((authState:FirebaseAuthState) => {\n          delete formUser.password;\n          let userId:string = authState.auth.uid;\n\n          this.userService.create(formUser, userId).then(() => {\n            this.navCtrl.setRoot(\"HomePage\");\n            loading.dismiss();\n          }).catch((error:any) => {\n            loading.dismiss();\n            this.showAlert(error);\n          })\n        }).catch((error:any) => {\n          loading.dismiss();\n          this.showAlert(error);\n        });\n      } else {\n        loading.dismiss();\n        this.showAlert(\"This username is already been used.\");\n      }\n    })\n  }\n\n  private showLoading():Loading{\n    let loading:Loading = this.loadingCtrl.create({\n      content: \"Pleace wait...\"\n    });\n\n    loading.present();\n    return loading;\n  }\n\n  private showAlert(message:string):void{\n    this.alertCtrl.create({\n      message: message,\n      buttons:[\"OK\"]\n    }).present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}